!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/platform-browser"),require("@angular/common"),require("bergben-angular2-file-drop")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/platform-browser","@angular/common","bergben-angular2-file-drop"],t):t(e["ng2-file-input"]=e["ng2-file-input"]||{},e.ng.core,e._angular_platformBrowser,e._angular_common,e.bergbenAngular2FileDrop)}(this,function(e,t,i,n,o){"use strict";function l(e){var t=new r;return Object.assign(t,e),t}var r=function(){function e(){this.dropText="Drop file here",this.browseText="Browse",this.removeText="Remove",this.invalidFileText="You have picked an invalid or disallowed file.",this.invalidFileTimeout=8e3,this.removable=!0,this.multiple=!1,this.showPreviews=!0,this.extensions=[]}return e}(),s=function(e,t,i,n){var o,l=arguments.length,r=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(l<3?o(r):l>3?o(t,i,r):o(t,i))||r);return l>3&&r&&Object.defineProperty(t,i,r),r},p=function(e,t){return function(i,n){t(i,n,e)}};e.Ng2FileInputComponent=function(){function e(e,i){this.sanitizer=e,this.defaultOptions=i,this.alreadyEmitted=!1,this.fileIsOver=!1,this.invalidFile=!1,this.multiple=null,this.removable=null,this.showPreviews=null,this.output=new t.EventEmitter,this.currentFiles=[]}return e.prototype.ngOnInit=function(){this.dropText=this.dropText||this.defaultOptions.dropText,this.browseText=this.browseText||this.defaultOptions.browseText,this.removeText=this.removeText||this.defaultOptions.removeText,this.invalidFileText=this.invalidFileText||this.defaultOptions.invalidFileText,this.invalidFileTimeout=this.invalidFileTimeout||this.defaultOptions.invalidFileTimeout,this.multiple=null!==this.multiple?this.multiple:this.defaultOptions.multiple,this.removable=null!==this.removable?this.removable:this.defaultOptions.removable,this.showPreviews=null!==this.showPreviews?this.showPreviews:this.defaultOptions.showPreviews,this.extensions=this.extensions||this.defaultOptions.extensions},e.prototype.fileOver=function(e){this.fileIsOver=e},e.prototype.onFileDrop=function(e){var t=this;this.multiple?this.handleFile(e):this.alreadyEmitted||(this.alreadyEmitted=!0,this.handleFile(e),setTimeout(function(){t.alreadyEmitted=!1},0))},e.prototype.fileSelected=function(e){this.invalidFile=!1;var t=e.target.files;if(t&&t.length)if(this.multiple)for(var i=0;i<t.length;i++)this.handleFile(t[i]);else this.handleFile(t[0]);setTimeout(function(){e.target.value=""},0)},e.prototype.removeFile=function(e){if(this.removable)for(var t=0;t<this.currentFiles.length;t++)this.currentFiles[t]===e&&(this.currentFiles.splice(t,1),this.output.emit({currentFiles:this.currentFiles,action:"removed",file:e}))},e.prototype.getObjectUrl=function(e){return this.sanitizer.bypassSecurityTrustResourceUrl(window.URL.createObjectURL(e))},e.prototype.handleFile=function(e){this.isValidFile(e)&&(this.multiple||(this.currentFiles=[]),this.currentFiles.push(e),this.output.emit({currentFiles:this.currentFiles,action:"added",file:e}))},e.prototype.isValidFile=function(e){var t=this;if(this.extensions.length>0){var i=e.name.split(".").pop();if(-1!==this.extensions.indexOf("image/jpg")&&-1===this.extensions.indexOf("image/jpeg")&&this.extensions.push("image/jpeg"),-1===this.extensions.indexOf(e.type)&&-1===this.extensions.indexOf(i))return this.invalidFile=!0,0!==this.invalidFileTimeout&&setTimeout(function(){t.invalidFile=!1},this.invalidFileTimeout),!1}return!0},e}(),s([t.Input("drop-text")],e.Ng2FileInputComponent.prototype,"dropText",void 0),s([t.Input("browse-text")],e.Ng2FileInputComponent.prototype,"browseText",void 0),s([t.Input("remove-text")],e.Ng2FileInputComponent.prototype,"removeText",void 0),s([t.Input("invalid-file-text")],e.Ng2FileInputComponent.prototype,"invalidFileText",void 0),s([t.Input("invalid-file-timeout")],e.Ng2FileInputComponent.prototype,"invalidFileTimeout",void 0),s([t.Input("multiple")],e.Ng2FileInputComponent.prototype,"multiple",void 0),s([t.Input("removable")],e.Ng2FileInputComponent.prototype,"removable",void 0),s([t.Input("show-previews")],e.Ng2FileInputComponent.prototype,"showPreviews",void 0),s([t.Input("extensions")],e.Ng2FileInputComponent.prototype,"extensions",void 0),s([t.Output("onChange")],e.Ng2FileInputComponent.prototype,"output",void 0),e.Ng2FileInputComponent=s([t.Component({selector:"ng2-file-input",template:'<div class="ng2-file-input">\n                    <div class="ng2-file-input-invalid text-danger" [hidden]="!invalidFile" [innerHTML]="invalidFileText"></div>\n                    <div fileDrop class="ng2-file-input-drop-container" [ngClass]="{\'file-is-over\': fileIsOver}" (fileOver)="fileOver($event)"\n                        (onFileDrop)="onFileDrop($event)">\n                        <span [innerHTML]="dropText"></span>\n                        <button type="button" (click)="ng2FileInputSelect.click()" class="btn btn-primary" [innerHTML]="browseText"></button>\n                    </div>\n                    <div class="ng2-file-input-files" *ngIf="showPreviews">\n                        <div *ngFor="let file of currentFiles" class="ng2-file-input-file" [ngClass]="{\'image\':file.type.indexOf(\'image\')!==-1}">\n                            <span [innerHTML]="file.name" class="ng2-file-input-file-text"></span>\n                            <img [src]="getObjectUrl(file)" *ngIf="file.type.indexOf(\'image\')!==-1">\n                            <span class="ng2-file-input-file-text remove" (click)="removeFile(file)" *ngIf="removable">\n                                <p [innerHTML]="removeText"></p>\n                            </span> \n                        </div>\n                    </div>\n                    <input type="file" #ng2FileInputSelect (change)="fileSelected($event)" [attr.multiple]="multiple ? true : null">\n                </div>'}),p(0,t.Inject(t.forwardRef(function(){return i.DomSanitizer}))),p(1,t.Inject(t.forwardRef(function(){return r})))],e.Ng2FileInputComponent);var u=function(e,t,i,n){var o,l=arguments.length,r=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(l<3?o(r):l>3?o(t,i,r):o(t,i))||r);return l>3&&r&&Object.defineProperty(t,i,r),r},a=new t.OpaqueToken("ng2 file input custom user options");e.Ng2FileInputModule=f=function(){function e(){}return e.forRoot=function(e){return void 0===e&&(e={}),{ngModule:f,providers:[{provide:a,useValue:e},{provide:r,useFactory:l,deps:[a]}]}},e}(),e.Ng2FileInputModule=f=u([t.NgModule({imports:[n.CommonModule,o.FileDropModule],declarations:[e.Ng2FileInputComponent],exports:[e.Ng2FileInputComponent]})],e.Ng2FileInputModule);var f;e.Ng2FileInputOptions=r,Object.defineProperty(e,"__esModule",{value:!0})});